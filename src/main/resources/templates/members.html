<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="en">
<head>
    <meta charset="UTF-8">
    <title layout:title-pattern="$LAYOUT_TITLE - $CONTENT_TITLE">Site name</title>
    <div th:insert="fragments/head :: head"></div>

</head>
<body>
<div th:insert="fragments/header :: header"></div>

<section>
    <div class="container">
        <div class="row mt-2">
            <div class="col">
                <div class="fixed-side">
                    <button type="button" class="btn btn-primary 60 add-new"
                            data-bs-toggle="modal" data-bs-target="#manageMember">Add
                        new member
                    </button>
                </div>
                <table class="table mt-2">
                    <thead>
                    <tr>
                        <!--<th scope="col">#</th>-->
                        <th scope="col">FirstName</th>
                        <th scope="col">LastName</th>
                        <th scope="col">Email</th>
                        <th scope="col">Address</th>
                        <th scope="col">Country</th>
                        <th scope="col">City</th>
                        <th scope="col">Status</th>
                        <th scope="col">Action</th>

                    </tr>
                    </thead>
                    <tbody>
                    <tr th:classappend="${member.active} ? active : inactive" scopr="row" th:each="member: ${members}">
                        <!--<td th:text="${member.id}">id</td>-->
                        <td th:text="${member.firstname}">firstname</td>
                        <td th:text="${member.lastname}">lastname</td>
                        <td th:text="${member.email}">email</td>
                        <td th:text="${member.address}">address</td>
                        <td th:text="${member.country}">country</td>
                        <td th:text="${member.city}">city</td>
                        <td th:text="${member.active}">active</td>
                        <td>

                            <input type="hidden" id="memberId" th:value="${member.id}">
                            <button type="button" class="btn btn-primary rounded-5 btn-sm p-1 edit"
                                    data-bs-toggle="modal"
                                    data-bs-target="#manageMember">
                                <i class="bi bi-pen"></i>
                            </button>
                            <button sec:authorize="hasAnyAuthority('ADMIN')"
                                    class="btn btn-danger rounded-5 btn-sm  p-1 delete">
                                <i class="bi bi-archive"></i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item" th:classappend="${currentPage == 1} ? disabled : ''">
                        <a class="page-link" href="#" aria-label="Previous"
                           th:if="${currentPage <= totalPages}" th:href="@{'/members/page/' + ${currentPage - 1}}">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <th:block th:if="${totalPages > 10}">
                        <th:block th:if="${currentPage <= 5 || currentPage >= totalPages - 4}">
                            <li class="page-item"
                                th:each="i: ${#numbers.sequence(1, 5)}"
                                th:classappend="${currentPage==i} ? active : ''">
                                <a class="page-link" th:href="@{'/members/page/' + ${i}}">[[${i}]]</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" th:href="@{'members/page/6'}">...</a>
                            </li>

                            <li class="page-item"
                                th:each="i: ${#numbers.sequence(totalPages - 4, totalPages)}"
                                th:classappend="${currentPage==i} ? active : ''">
                                <a class="page-link" th:href="@{'/members/page/' + ${i}}">[[${i}]]</a>
                            </li>
                        </th:block>

                        <th:block th:if="${currentPage > 5 && currentPage < totalPages - 4}">
                            <li class="page-item">
                                <a class="page-link" th:href="@{'/members/page/' + ${currentPage - 5}}">...</a>
                            </li>

                            <li class="page-item"
                                th:each="i: ${#numbers.sequence(currentPage - 4 , currentPage + 4)}"
                                th:classappend="${currentPage==i} ? active : ''">
                                <a class="page-link" th:href="@{'/members/page/' + ${i}}">[[${i}]]</a>
                            </li>


                            <li class="page-item">
                                <a class="page-link" th:href="@{'/members/page/' + ${currentPage + 5}}">...</a>
                            </li>
                        </th:block>
                    </th:block>

                    <th:block th:if="${totalPages <= 10}">
                        <li class="nav-item"
                            th:each="i : ${#numbers.sequence(1, totalPages)}">
                            <a class="page-link" th:href="@{'/members/page/' + ${i}}"
                               th:classappend="${currentPage}==${i}?'active':''">[[${i}]]</a>

                        </li>
                    </th:block>


                    <li class="page-item" th:classappend="${currentPage >= totalPages} ? disabled : ''">
                        <a class="page-link" href="#" aria-label="Next"
                           th:if="${currentPage <= totalPages}" th:href="@{'/members/page/' + ${currentPage + 1}}">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>


        </div>
    </div>
</section>
<!-- Modal Edit Member-->
<div class="modal right fade" id="manageMember" tabindex="-1" aria-labelledby="modalEditMember" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="modalEditMember"></h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form th:action="@{/save-member}" th:method="POST">
                    <div class="mb-3">
                        <input type="text" class="form-control" name="firstname" placeholder="First Name">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="lastname" placeholder="Last Name">
                    </div>
                    <div class="mb-3">
                        <input type="email" class="form-control" name="email" placeholder="Email Address">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="address" placeholder="Address">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="country" placeholder="Country">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="city" placeholder="City">
                    </div>
                    <div class="mb-3">
                        <label class="form-label d-block">Member Status</label>

                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="member_status" id="active" value="true">
                            <label class="form-check-label" for="active">Active</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="member_status" id="inactive"
                                   value="false">
                            <label class="form-check-label" for="inactive">Inactive</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

</body>
<div th:replace="fragments/footer :: footer"></div>

</html>